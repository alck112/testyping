<Window
    x:Class="ScjWin11UI.CandidateWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:ScjWin11UI.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="SCJ Candidate UI"
    Width="360" Height="240">

    <Window.SystemBackdrop>
        <!-- Acrylic is usually better for transient UI like an IME candidate window -->
        <DesktopAcrylicBackdrop />
    </Window.SystemBackdrop>

    <Grid x:Name="Root" Background="Transparent" Padding="8">
        <Border x:Name="Card"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="12"
                Padding="12"
                Translation="0,0,16"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1">
            <Border.Shadow>
                <ThemeShadow />
            </Border.Shadow>
<StackPanel Spacing="10">
                <TextBlock x:Name="CompositionText"
                           Text="{x:Bind ViewModel.Composition, Mode=OneWay}"
                           TextTrimming="CharacterEllipsis"
                           Opacity="0.85"
                           FontSize="14" />

                <ListView x:Name="CandidateList"
                          ItemsSource="{x:Bind ViewModel.Candidates, Mode=OneWay}"
                          SelectedIndex="{x:Bind ViewModel.SelectedIndex, Mode=TwoWay}"
                          IsItemClickEnabled="True"
                          ItemClick="CandidateList_ItemClick"
                          SelectionChanged="CandidateList_SelectionChanged">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="local:CandidateItem">
                            <Grid Padding="8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="28"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="{x:Bind DisplayIndex}"
                                           Opacity="0.7"
                                           FontSize="12"
                                           VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="1"
                                           Text="{x:Bind Text}"
                                           FontSize="16"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <TextBlock x:Name="HintText"
                           Text="{x:Bind ViewModel.Hint, Mode=OneWay}"
                           Opacity="0.6"
                           FontSize="12" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
